---
layout:       post
title:        WSLï¼šWindowsè‡ªå¸¦Linuxä½¿ç”¨æŒ‡å—  
subtitle:     åœ¨Win10ä¸­å®‰è£…LinuxåŠç®€å•WSLçš„ä½¿ç”¨  
date:         2022-01-01
auther:       BlackDn
header-img:   img/19mon5_34.jpg  
catalog:      true
tags:
    - Linux  
    - Windows  
    - Tutorial  
---

> "ç”Ÿæ´»æ˜æœ—ï¼Œä¸‡ç‰©å¯çˆ±ã€‚äººé—´å€¼å¾—ï¼Œæœªæ¥å¯æœŸã€‚"

# WSLï¼šWindowsè‡ªå¸¦Linuxä½¿ç”¨æŒ‡å—
## å‰è¨€
æ–°å¹´å¿«ä¹~  
å› ä¸ºç©çš„æœ‰ç‚¹ç–¯æ‰€ä»¥å’•å’•äº†å¥½ä¹…  
éš”å£åŒå­¦éƒ½å¼€å§‹å†™å¼€é¢˜æŠ¥å‘Šäº†ï¼Œæˆ‘è¿˜åœ¨è¿™è‚æ¨é€ï¼Œå¯æ¶  
æœ€è¿‘æ²¡ä»€ä¹ˆåŠ¨åŠ›å•Š=ã€‚=

## Windowsè‡ªå¸¦çš„Linux

åœ¨æˆ‘ä»¬Windowsç©å®¶ä¸­ï¼Œè¯´åˆ°å®‰è£…Linuxï¼Œç¬¬ä¸€ååº”å¤§éƒ¨åˆ†éƒ½æ˜¯VMæˆ–è€…VBé‡Œè£…ä¸ªè™šæ‹Ÿæœºã€‚æ¯”å¦‚æˆ‘å°±ä¹ æƒ¯ç”¨VMï¼Œæ¯æ¬¡è¦ç”¨çš„æ—¶å€™å°±æ‰“å¼€ï¼Œæ–‡ä»¶æ‹–æ¥æ‹–å»ï¼Œæœ‰æ—¶å€™ä¼šæ„Ÿè§‰æ¯”è¾ƒéº»çƒ¦ã€‚è€Œä¸”å§è¿™ç©æ„è¿˜å å†…å­˜å ç©ºé—´ã€‚  
ä¸è¿‡å‘¢ï¼Œé€€ä¸€æ­¥è®²ï¼Œæˆ‘ä»¬ç”¨Linuxå¾ˆå¤šæ—¶å€™æƒ³ç”¨çš„æ˜¯å®ƒçš„æ§åˆ¶å°ï¼Œå­¦ä¹ å®ƒçš„å‘½ä»¤ã€å·¥å…·ï¼Œè€Œè™šæ‹Ÿæœºæ‰€å¸¦çš„å›¾å½¢ç•Œé¢åè€Œæ˜¯æ¬¡è¦çš„ã€‚  

äºæ˜¯ä¹ï¼Œæœ‰äº†ä»Šå¤©çš„ä¸»è§’â€”â€”Windowsè‡ªå¸¦çš„Linuxã€‚  
è¯´æ˜¯è‡ªå¸¦çš„ä¹Ÿä¸å‡†ç¡®ï¼Œå…¶å®æ˜¯Microsoftä¸ºæˆ‘ä»¬æä¾›çš„ä¸€ä¸ªWSLå·¥å…·ï¼ˆWindows Subsystem for Linuxï¼‰ã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦å°±æ˜¯**åœ¨Windowsï¼ˆWin10ï¼‰ä¸Šå®‰è£…WSLåŠå…¶ç®€å•ä½¿ç”¨çš„æŒ‡å—**ã€‚  
ç®€å•åˆ†æä¸€ä¸‹ä¼˜ç¼ºç‚¹ï¼šè™šæ‹Ÿæœºçš„å¥½å¤„åœ¨äºï¼Œå…¶æ˜¯ä¸€ä¸ªæ²™ç›’ç©ºé—´ï¼Œä¸ä¼šå½±å“åˆ°æœ¬æœºï¼Œä¸­ç—…æ¯’äº†ä¹Ÿæ²¡äº‹ï¼›è€Œä¸”å¯ä»¥ä½¿ç”¨â€œå¿«ç…§â€ä¹‹ç±»çš„åŠŸèƒ½ï¼Œè¿›è¡Œæ—¶é—´å›æº¯ç­‰  
è€ŒWSLçš„ä¼˜ç‚¹å°±åœ¨äºå…¶è½»é‡ã€å¯åŠ¨å¿«ï¼›è€Œä¸”å¯ä»¥éšæ—¶è®¿é—®æœ¬æœºçš„æ–‡ä»¶ç­‰ï¼›ä¸è¿‡æ²¡æœ‰å›¾å½¢åŒ–ç•Œé¢ã€‚  

PSï¼šç”±äºæˆ‘å·²ç»è£…è¿‡äº†ï¼Œæ‰€ä»¥å®‰è£…è¿‡ç¨‹å¯èƒ½ç”¨çš„æ˜¯ç½‘ä¸Šå…¶ä»–äººçš„ï¼Œæ‰€ä»¥å¯èƒ½ä¼šæœ‰ä¸­è‹±æ–‡äº’ç”¨çš„ï¼Œè¯·å¿½ç•¥ï¼Œå˜»å˜»

### å®‰è£…

å®‰è£…å…±åˆ†ä¸ºä¸¤æ­¥ï¼Œååˆ†ç®€å•  
è¿™é‡Œæä¸€å˜´ï¼Œå®‰è£…çš„Win10çš„ç‰ˆæœ¬è¦2004ä»¥ä¸Šçš„ï¼Œä¸è¿‡éƒ½å¿«2022å¹´äº†ï¼Œåº”è¯¥ä¸ä¼šæœ‰äººä¸è¡Œå§ï¼Ÿä¸ä¼šå§ä¸ä¼šå§

#### 1. å¯åŠ¨WSLåŠŸèƒ½ä¸Linux

æ¥åˆ°æ§åˆ¶é¢æ¿ -> å¸è½½ç¨‹åºç•Œé¢ï¼Œå·¦ä¸Šè§’è¿›å…¥â€œå¯åŠ¨æˆ–å…³é—­WindowsåŠŸèƒ½â€ï¼Œé‡Œé¢å‹¾é€‰â€œé€‚ç”¨äºLinuxçš„Windowså­ç³»ç»Ÿâ€å’Œâ€œè™šæ‹Ÿæœºå¹³å°â€ï¼Œè‹±æ–‡åˆ†åˆ«æ˜¯â€œVirtual Machine Platformâ€å’Œâ€œWindows Subsystem for Linuxâ€ã€‚  
ç„¶åé‡å¯å°±å¥½äº†

#### 2. ä¸‹è½½Linux

è™½ç„¶æ˜¯ä¸‹è½½å§ï¼Œä½†æ˜¯ä¸ç”¨æˆ‘ä»¬è‡ªå·±æ‰¾ï¼Œåœ¨**Microsoft Store**é‡Œæœç´¢`Linux`æˆ–`Ubuntu`å°±è¡Œäº†  
æˆ‘å†™æ–‡ç« çš„æ—¶å€™çœ‹åˆ°çš„æ˜¯æœ‰ä¸€ä¸ªKaliï¼Œæœ‰ä¸‰ä¸ªUbuntuï¼Œåˆ†åˆ«æ˜¯â€œUbuntuâ€ã€â€œUbuntu 20.04 LTSâ€å’Œâ€œUbuntu 18.04 LTSâ€ã€‚å› ä¸ºæˆ‘è‡ªå·±ä¸‹çš„æ˜¯Ubuntuæ‰€ä»¥ä»¥Ubuntuä¸ºä¾‹ï¼ˆKaliçš„æˆ‘æœ‰VMçš„è™šæ‹Ÿæœºäº†ï¼‰ï¼Œå…¶å®ä½ éƒ½ä¸‹äº†ä¹Ÿæ²¡å…³ç³»ï¼Œåæ­£åˆ°æ—¶å€™ä¼šæœ‰ä¸ªåˆ—è¡¨å¯ä»¥é€‰æ‹©ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹é»˜è®¤çš„å¯åŠ¨æœºå™¨ã€‚æˆ‘ä¸‹çš„æ˜¯**Ubuntu 20.04**ï¼Œå¬è¯´ä¸‹Ubuntuç›´æ¥æ˜¯ä¸‹çš„æœ€æ–°ç‰ˆï¼Œå¤§å®¶å¯ä»¥å°è¯•ä¸€ä¸‹ã€‚  
ä¸‹å®Œå°±å¥½äº†ï¼Œä¸å‡ºæ„å¤–å°±å®‰è£…æˆåŠŸäº†ã€‚ç„¶ååœ¨æ¡Œé¢æˆ–è€…èœå•æ ä¼šå‡ºç°Ubuntuçš„å›¾æ ‡ï¼Œç‚¹å‡»å°±å¯ä»¥å¯åŠ¨äº†ã€‚

![usage](https://s4.ax1x.com/2022/01/01/TIaIHJ.jpg)  

### åˆå§‹é…ç½®

ç‚¹å‡»Ubuntuå›¾æ ‡åä¼šæ‰“å¼€ä¸€ä¸ªç±»ä¼¼cmdçš„**å‘½ä»¤æç¤ºç¬¦çª—å£**ï¼Œç„¶åç­‰ä¸ªå‡ åˆ†é’Ÿè®©ä»–è£…è£…å®Œã€‚  
ä¹‹åä¼šè®©ä½ è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œä½œä¸ºä¸€ä¸ªåˆå§‹ç”¨æˆ·ï¼Œè€ç”Ÿå¸¸è°ˆäº†ã€‚ä¸è¿‡è¦æ³¨æ„è¿™ä¸ªç”¨æˆ·å’Œrootç”¨æˆ·æ˜¯ä¸ä¸€æ ·çš„ã€‚  
å¤§è‡´å†…å®¹å¦‚ä¸‹ï¼Œä½ ä¹Ÿæœ‰å¯èƒ½æ˜¯ä¸­æ–‡çš„ã€‚

```bash
Installing, this may take a few minutes...
Please create a default UNIX user account. The username does not need to match your Windows username.
For more information visit: https://aka.ms/wslusers
Enter new UNIX username: ï¼ˆä½ è¾“å…¥çš„ç”¨æˆ·åï¼‰
New password:ï¼ˆä½ è¾“å…¥çš„å¯†ç ï¼Œçœ‹ä¸è§çš„ï¼‰
Retype new password:ï¼ˆä½ è¾“å…¥çš„å¯†ç ï¼Œè¿˜æ˜¯çœ‹ä¸è§çš„ï¼‰
passwd: password updated successfully
Installation successful!
To run a command as administrator (user "root"), use "sudo <command>".
See "man sudo_root" for details.

Welcome to Ubuntu 20.04 LTS (GNU/Linux 4.19.104-microsoft-standard x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Mon Jul 6 12:07:38 BST 2020

  System load:  0.27               Processes:             8
  Usage of /:   0.4% of 250.98GB   Users logged in:       0
  Memory usage: 0%                 IPv4 address for eth0: 172.21.232.173
  Swap usage:   0%

0 updates can be installed immediately.
0 of these updates are security updates.

The list of available updates is more than a week old.
To check for new updates run: sudo apt update
```

å¦‚æœåœ¨å®‰è£…è¿‡ç¨‹ä¸­ï¼Œæ˜¾ç¤º **â€œä¸å—æ”¯æŒçš„æ§åˆ¶å°è®¾ç½®ã€‚è‹¥è¦ä½¿ç”¨æ­¤åŠŸèƒ½ï¼Œå¿…é¡»ç¦ç”¨æ—§çš„æ§åˆ¶å°â€**ï¼Œé‚£å°±éœ€è¦åœ¨å‘½ä»¤æç¤ºç¬¦çš„æ ‡é¢˜æ  `å³é”® -> å±æ€§ -> é€‰é¡¹` ï¼Œå–æ¶ˆå‹¾é€‰ **â€œä½¿ç”¨æ—§ç‰ˆæ§åˆ¶å°â€** çš„é€‰é¡¹ï¼Œä¸è¿‡ä¹‹åéœ€è¦é‡å¯å‘½ä»¤æç¤ºç¬¦ã€‚    
è¿˜æœ‰ä¸€ç§æ–¹æ³•ï¼Œå°±æ˜¯åœ¨ **Microsoft Store** é‡Œæœç´¢å¹¶ä¸‹è½½ `â€œWindows Terminalâ€`ï¼Œè¿™ä¸ªæ§åˆ¶å°ä¸ä»…æ¯”è‡ªå¸¦çš„æ§åˆ¶å°å¥½çœ‹ï¼Œè¿˜ä¸ä¼šå‡ºç°ä¸Šé¢çš„é”™è¯¯ã€‚

å¦‚æœæœ‰ä¸€ä¸ªäººå¾ˆä¸çˆ½è¿™ä¸ªæç¤ºï¼Œç„¶ååœ¨å®‰è£…å®Œåï¼Œåœ¨è¾“å…¥å¯†ç å‰ï¼Œå°±å…³é—­äº†è¿™ä¸ªå‘½ä»¤æç¤ºç¬¦ï¼ˆæ¯”å¦‚æˆ‘ï¼‰ã€‚å°±ä¼šå‘ç°ï¼Œå†æ¬¡æ‰“å¼€åå°±ç›´æ¥ä»¥rootèº«ä»½è¿›å…¥Linuxäº†ï¼Œæ²¡æœ‰ä¹‹å‰è¦æˆ‘ä»¬è®¾ç½®ç”¨æˆ·åå¯†ç äº†ï¼Œè¿™å°±ä¼šå¯¼è‡´æˆ‘ä»¬çš„Linuxåªæœ‰ä¸€ä¸ªrootç”¨æˆ·è€Œæ²¡æœ‰å…¶ä»–ç”¨æˆ·ï¼Œè¿™æ˜¯ä¸åˆç†çš„ã€‚  
è¿™å°±éœ€è¦æˆ‘ä»¬ä¹‹åå†æ‰‹åŠ¨æ·»åŠ ä¸€ä¸ªç”¨æˆ·ã€‚ä¸è¿‡å› ä¸ºå‡ºç°è¿™ä¸ªé—®é¢˜çš„æ¦‚ç‡æ¯”è¾ƒä½ï¼Œæ‰€ä»¥æ·»åŠ ç”¨æˆ·æ”¾åé¢å†è®²ã€‚

### å‡çº§ç³»ç»Ÿ

åˆ°æ­¤æˆ‘ä»¬çš„Linuxå°±ç®—å®‰è£…å®Œæˆäº†ï¼Œä¸è¿‡å’±ä¹Ÿä¸èƒ½ä¿è¯æˆ‘ä»¬çš„Linuxæ˜¯æœ€æ–°çš„ï¼Œæ‰€ä»¥è¿˜æ˜¯æ£€ç´¢ä¸€ä¸‹çœ‹çœ‹æœ‰æ²¡æœ‰æ›´æ–°çš„å®‰è£…åŒ…  
åœ¨Linuxç•Œé¢ä»¥æ­¤è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼Œå‡çº§å®ŒåæŠŠå®‰è£…åŒ…ä¹Ÿåˆ äº†ï¼š

```bash
sudo apt-get update
sudo apt-get upgrade
sudo apt-get dist-upgrade
sudo apt-get autoremove
```

æå®šï¼Œæ¥ä¸‹æ¥å°±æ˜¯ç”¨WSLæ“ä½œæˆ‘ä»¬çš„Linuxå•¦

## ç”¨WSLç®€å•æ“ä½œLinux

WSLçš„å…¨ç§°æ˜¯Windows Subsystem for Linuxï¼Œæ‰€ä»¥å½“ç„¶åº”è¯¥æ˜¯è¦åœ¨Windowsé‡Œä½¿ç”¨çš„ã€‚  
æ‰€ä»¥å¸¦æœ‰wslçš„å‘½ä»¤éƒ½æ˜¯åœ¨Windowsçš„å‘½ä»¤æç¤ºç¬¦ä¸­è¿›è¡Œçš„æ“ä½œï¼Œè€Œä¸æ˜¯åœ¨Linuxä¸­çš„ï¼Œè¿™ç‚¹è¦æ³¨æ„ã€‚

### æŸ¥çœ‹Linuxåˆ—è¡¨ã€è®¾ç½®é»˜è®¤è™šæ‹Ÿæœº

ç”¨ä»¥ä¸‹å‘½ä»¤å¯ä»¥æŸ¥çœ‹å·²ç»å®‰è£…çš„Linuxåˆ—è¡¨ã€‚

```bash
wsl --list

PS C:\Users\BlackDn> wsl --list
é€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿåˆ†å‘ç‰ˆ:
Ubuntu-20.04 (é»˜è®¤)
```

å°±åƒä¸Šé¢ä¸€æ ·ï¼Œè¾“å…¥å‘½ä»¤åä¼šæ˜¾ç¤ºå¯ç”¨çš„Linuxåˆ—è¡¨ï¼Œå› ä¸ºæˆ‘åªè£…äº†ä¸€ä¸ªæ‰€ä»¥åªæ˜¾ç¤ºäº†ä¸€ä¸ªã€‚åé¢æœ‰â€œï¼ˆé»˜è®¤ï¼‰â€å°±è¡¨ç¤ºæ˜¯é»˜è®¤ä½¿ç”¨çš„Linuxã€‚  
å¦‚æœå®‰è£…äº†å¤šä¸ªLinuxï¼Œå¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤ä¿®æ”¹é»˜è®¤Linux

```bash
wsl --setdefault <Name>

PS C:\Users\BlackDn> wsl --setdefault Ubuntu-20.04
```

æ³¨æ„è¿™é‡Œçš„`<DistributionName>`è¦å’Œåˆ—è¡¨é‡Œçš„ä¸€æ ·ï¼Œæ‰€ä»¥åœ¨ä¿®æ”¹å‰è¦å…ˆæŸ¥çœ‹çœ‹Linuxåˆ—è¡¨ç¡®è®¤åå­—ã€‚

### åœ¨Windowsæ§åˆ¶å°å¯åŠ¨Linux

åœ¨æœ‰å¤šä¸ªLinuxçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æƒ³å¯åŠ¨æŸä¸ªLinuxï¼Œéœ€è¦ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

```bash
wsl -d, --distribution <Name>

PS C:\Users\BlackDn> wsl -d Ubuntu-20.04
root@BlackDn-DESKTOP:/mnt/c/Users/BlackDn#
```

ç”±äºæˆ‘åªæŒ‡å®šäº†Linuxï¼Œæ²¡æœ‰æŒ‡å®šç”¨æˆ·ï¼Œæ‰€ä»¥é»˜è®¤ä»¥`rootç”¨æˆ·`å¯åŠ¨ã€‚å¦‚æœæˆ‘ä»¬è¦æŒ‡å®šç”¨æˆ·ï¼Œæ¯”å¦‚æˆ‘ä¹‹å‰åˆ›å»ºäº†åä¸º`blackdn`çš„ç”¨æˆ·ï¼Œåˆ™è¦ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

```bash
wsl -u, --user <user>

PS C:\Users\BlackDn> wsl -u blackdn
blackdn@BlackDn-DESKTOP:/mnt/c/Users/BlackDn$
```

å½“ç„¶ä¹Ÿå¯ä»¥ä¸¤è€…è”åˆèµ·æ¥ç”¨ï¼Œä»¥æŸç”¨æˆ·å¯åŠ¨æŸLinuxï¼Œå½“ç„¶è¿™ä¸ªç”¨æˆ·è¦å­˜åœ¨äºè¯¥Linuxä¸­ã€‚

```bash
PS C:\Users\BlackDn> wsl -d Ubuntu-20.04 -u blackdn
blackdn@BlackDn-DESKTOP:/mnt/c/Users/BlackDn$
```

è¿™æ—¶æˆ‘ä»¬å·²ç»è¿›å…¥äº†Linuxï¼Œå¯ä»¥ä½¿ç”¨Linuxçš„å‘½ä»¤ã€‚è¾“å…¥`exit`å‘½ä»¤å¯ä»¥å›åˆ°Windowsæ§åˆ¶å°ã€‚

### åœ¨Windowsæ–‡ä»¶èµ„æºç®¡ç†å™¨è®¿é—®Linux

PSï¼šWindowsæ–‡ä»¶å¤¹çš„å­¦æœ¯åç§°ä¸ºâ€œæ–‡ä»¶èµ„æºç®¡ç†å™¨â€

æ›´è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬æ—¢ç„¶åœ¨Windowsé‡Œè£…äº†Linuxï¼Œé‚£ä¹ˆè¿™ä¸ªLinuxçš„æ–‡ä»¶åœ¨å“ªå‘¢ï¼Ÿ  
å®é™…ä¸Šå®ƒåœ¨â€œæ–‡ä»¶èµ„æºç®¡ç†å™¨â€çš„â€œç½‘ç»œâ€æ–‡ä»¶å¤¹ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡`â€œ\\wsl$\<Name>`æ¥è®¿é—®ï¼Œæˆ‘çš„å°±æ˜¯`â€œ\\wsl$\Ubuntu-20.04â€`ã€‚åœ¨å…¶ä¸­çš„`home`ç›®å½•ä¸‹å°±æœ‰è¯¥Linuxçš„æ‰€æœ‰ç”¨æˆ·ã€‚

![windowsdir](https://s4.ax1x.com/2022/01/01/TIa5B4.jpg)    

### ä¿®æ”¹WSLç‰ˆæœ¬

å…ˆä»‹ç»ä¸€ä¸‹WSLï¼ŒWindows Subsystem for Linuxï¼Œç®€å•æ¥è¯´å°±æ˜¯Windowsçš„ä¸€ä¸ªç”¨äºç®¡ç†ã€ä½¿ç”¨GNU/Linuxçš„å·¥å…·ã€‚æœ‰WSL 1å’ŒWSL 2ä¸¤ä¸ªç‰ˆæœ¬ã€‚  
ä¸¤è€…åŒºåˆ«åœ¨äºï¼ŒWSL 2é‡‡ç”¨äº†æ›´æ–°çš„æŠ€æœ¯ï¼Œåœ¨è½»é‡çº§å®ç”¨å·¥å…·è™šæ‹Ÿæœº (VMï¼ŒVirtual Machine) ä¸­è¿è¡Œ Linux å†…æ ¸ï¼Œå®ç°**æé«˜æ–‡ä»¶ç³»ç»Ÿæ€§èƒ½**ï¼Œä»¥åŠ**æ·»åŠ ç³»ç»Ÿè°ƒç”¨å…¼å®¹æ€§**ã€‚

åœ¨Windowså‘½ä»¤è¡Œä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹ä¸€ä¸‹WSLç‰ˆæœ¬ï¼Œå› ä¸ºWSLæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå·¥å…·ï¼Œå°±åƒLinuxé‡Œçš„pythonä¸€æ ·ï¼Œpythonåˆ†python2ã€python3ï¼ŒWSLä¹Ÿåˆ†WSL 1å’ŒWSL 2ã€‚  
è‡³äºä¸åŒç‰ˆæœ¬çš„WSLæ€ä¹ˆç”¨ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Œæˆ‘ä»¬ä¹‹åå†è®²ã€‚æ€»ä¹‹ç°åœ¨æ™®éç”¨WSL 2çš„ä¼šæ¯”è¾ƒå¤šã€‚  
æˆ‘ä»¬å…ˆç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ‰€ç”¨çš„LinuxåŠå…¶WSLç‰ˆæœ¬ï¼š

```bash
wsl --list --verbose

PS C:\Users\BlackDn> wsl --list --verbose
  NAME            STATE           VERSION
* Ubuntu-20.04    Stopped         1
```

è¿™é‡Œå¯ä»¥çœ‹åˆ°`VERSION`ä¸º1ï¼Œæˆ‘ä»¬ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œä¿®æ”¹ä¸º2ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç”¨åŒæ ·çš„æ–¹æ³•å°†å…¶æ”¹å›1ã€‚

```bash
PS C:\Users\BlackDn> wsl --set-version Ubuntu-20.04 2
æ­£åœ¨è¿›è¡Œè½¬æ¢ï¼Œè¿™å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´...
æœ‰å…³ä¸ WSL 2 çš„ä¸»è¦åŒºåˆ«çš„ä¿¡æ¯ï¼Œè¯·è®¿é—® https://aka.ms/wsl2
è½¬æ¢å®Œæˆã€‚
```

å¦‚æœæƒ³è¦ä»¥åå®‰è£…çš„Linuxé»˜è®¤éƒ½æ˜¯WSL 2ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤å°†å…¶è®¾ä¸ºé»˜è®¤ç‰ˆæœ¬ï¼š

```bash
wsl --set-default-version 2

PS C:\Users\BlackDn> wsl --set-default-version 2
æœ‰å…³ä¸ WSL 2 çš„ä¸»è¦åŒºåˆ«çš„ä¿¡æ¯ï¼Œè¯·è®¿é—® https://aka.ms/wsl2
æ“ä½œæˆåŠŸå®Œæˆã€‚
```

è¿™é‡Œè¦æ³¨æ„ä¸€ç‚¹ï¼Œå¦‚æœä¸€å¼€å§‹ä¸èƒ½åˆ‡æ¢ä¸ºWSL 2çš„è¯ï¼Œéœ€è¦åœ¨[è¿™é‡Œä¸‹è½½WSL 2 Linux å†…æ ¸æ›´æ–°åŒ…](https://docs.microsoft.com/zh-cn/windows/wsl/install-manual#step-4---download-the-linux-kernel-update-package)ï¼Œå®‰è£…å®Œä¹‹åå°±å¯ä»¥äº†ã€‚

## åœ¨Linuxä¸­è®¿é—®Windows

æ—¢ç„¶æ˜¯åœ¨Windowsä¸­å®‰è£…çš„Linuxï¼Œè‡ªç„¶å¯ä»¥è®¿é—®æˆ‘ä»¬Windowsçš„æ–‡ä»¶äº†  
ä»`â€œ\\wsl$\Ubuntu-20.04â€`çš„ç›®å½•ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œåœ¨å…¶ä¸­çš„`/mnt/`ç›®å½•ä¸‹ï¼Œå°±å¯¹åº”ç€Windowsæœ¬æœºçš„ç¡¬ç›˜ç›®å½•ã€‚æ¯”å¦‚æˆ‘è¦è®¿é—®Dç›˜ï¼Œå¯ä»¥åœ¨Linuxä¸­è®¿é—®`/mnt/d`ï¼š

```bash
PS C:\Users\BlackDn> wsl -u blackdn
blackdn@BlackDn-DESKTOP:/mnt/c/Users/BlackDn$ cd /mnt/d
blackdn@BlackDn-DESKTOP:/mnt/d$ ls
ls: cannot access 'pagefile.sys': Permission denied
'$RECYCLE.BIN'   EpicLibrary     OverWatch             'Sakuna Of Rice and Ruin'     pagefile.sys
 ASUS            HomeSweetHome  'Program Files (x86)'   SteamLibrary
 CS1.6           MSOCache        Recovery              'System Volume Information'
blackdn@BlackDn-DESKTOP:/mnt/d$
```

### åœ¨Linuxä¸­è¿è¡ŒWindowsç¨‹åº

å¤§éƒ¨åˆ†Windowsç¨‹åºéƒ½å¯ä»¥é€šè¿‡Linuxæ¥å¯åŠ¨ï¼Œä¸è¿‡å½“ç„¶æ˜¯åœ¨Windowsä¸­è¿è¡Œï¼ŒLinuxåªä¸è¿‡æ˜¯æä¾›ä¸€ä¸ªå¯åŠ¨çš„å‘½ä»¤ã€‚  
é€šå¸¸Windowsçš„å¯æ‰§è¡Œç¨‹åºï¼Œåœ¨Linuxä¸­éœ€è¦åŠ ä¸Š`".exe"`æ¥å¯åŠ¨ï¼Œæ¯”å¦‚ä»¥ä¸‹å‘½ä»¤åˆ†åˆ«è¡¨ç¤º**å¯åŠ¨æ–‡ä»¶èµ„æºç®¡ç†å™¨**ã€**ç”¨notepadæ‰“å¼€test.txtæ–‡ä»¶**

```bash
blackdn@BlackDn-DESKTOP:/mnt/d$ explorer.exe
blackdn@BlackDn-DESKTOP:/mnt/d$ notepad.exe test.txt
```



## ç”¨æˆ·

ç°åœ¨å›è¿‡å¤´æ¥ï¼Œå¤„ç†ä¸€ä¸‹ä¹‹å‰æ²¡æœ‰ç”¨æˆ·çš„é—®é¢˜ã€‚å…·ä½“è¡¨ç°ä¸ºï¼ŒLinuxå®‰è£…å®Œåï¼Œåœ¨å…¶homeç›®å½•ä¸‹ï¼ˆæˆ‘çš„æ˜¯`â€œ\\wsl$\Ubuntu-20.04\homeâ€`ï¼‰æ²¡æœ‰ç”¨æˆ·ï¼Œå³é™¤äº†rootç”¨æˆ·å¤–æ²¡æœ‰å…¶ä»–çš„ç”¨æˆ·ã€‚äºæ˜¯æˆ‘ä»¬å°±è¦è‡ªå·±åˆ›å»ºä¸€ä¸ªæ–°çš„ç”¨æˆ·ï¼Œå¹¶ç»™äºˆå…¶æˆä¸ºrootçš„æƒé™ã€‚

### åˆ›å»ºç”¨æˆ·

åˆ›å»ºç”¨æˆ·å»ºè®®ä½¿ç”¨`adduser`å‘½ä»¤ï¼Œåé¢è·Ÿç”¨æˆ·åä½œä¸ºå‚æ•°ï¼Œç„¶åå›è®©æˆ‘ä»¬è®¾ç½®å¯†ç ï¼Œç”šè‡³è¿˜æœ‰å…¨åã€ç”µè¯ä¹‹ç±»çš„ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å¯ä»¥ä¸å¡«ç›´æ¥è·³è¿‡ï¼Œæœ€åç¡®è®¤å³å¯ã€‚æˆ‘è¿™é‡Œä»¥åˆ›å»ºç”¨æˆ·`blackdn`ä¸ºä¾‹ã€‚

```bash
adduser <username>

root@BlackDn-DESKTOP:/mnt/c/Users/BlackDn# adduser blackdn
æ­£åœ¨æ·»åŠ ç”¨æˆ·"blackdn"...
Â·Â·Â·Â·Â·Â·
è¿™äº›ä¿¡æ¯æ˜¯å¦æ­£ç¡®ï¼Ÿ [Y/n] y
```

è¿™æ—¶å€™æˆ‘ä»¬å‘ç°`â€œ\\wsl$\Ubuntu-20.04\homeâ€`ç›®å½•ä¸­å·²ç»æœ‰`blackdn`çš„æ–‡ä»¶å¤¹äº†ï¼Œè¯´æ˜è¯¥ç”¨æˆ·æˆåŠŸåˆ›å»ºã€‚

### ç»™äºˆrootçš„æƒé™

è™½ç„¶ç›®å½•ä¸­å·²ç»æœ‰äº†è¯¥ç”¨æˆ·ï¼Œä½†æ˜¯è¯¥ç”¨æˆ·è¿˜ä¸èƒ½æˆä¸ºrootï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨è¯¥ç”¨æˆ·çŠ¶æ€ä¸‹æ— æ³•ä½¿ç”¨`â€œsudoâ€`å‘½ä»¤ï¼Œä¼šæç¤º`â€œblackdn is not in the sudoers fileâ€`ã€‚æ‰€ä»¥æˆ‘ä»¬è¦åœ¨`sudoers`æ–‡ä»¶ä¸­ä¸ºè¯¥ç”¨æˆ·æ·»åŠ æƒé™ã€‚

é¦–å…ˆè¦æ‰“å¼€è¯¥æ–‡ä»¶çš„è¯»å†™æƒé™ï¼š

```bash
root@BlackDn-DESKTOP:~# chmod u+w ../etc/sudoers
```

ç„¶åå¯¹è¯¥æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼š

```bash
root@BlackDn-DESKTOP:~# vi ../etc/sudoers
```

æ‰¾åˆ°`root	ALL=(ALL:ALL) ALL`éƒ¨åˆ†ï¼Œåœ¨è¿™è¡Œä¸‹é¢æ·»åŠ `<username> ALL=(ALL:ALL) ALL`ï¼Œæ¯”å¦‚æˆ‘æ˜¯`blackdn ALL=(ALL:ALL) ALL`

```bash
# User privilege specification
root	ALL=(ALL:ALL) ALL
blackdn ALL=(ALL:ALL) ALL
```

æœ€åå…³é—­è¯¥æ–‡ä»¶çš„è¯»å†™æƒé™å³å¯ï¼š

```bash
root@BlackDn-DESKTOP:~# chmod u-w ../etc/sudoers
```

## åè¯

æ€»ä¹‹ï¼Œåªè¦èƒ½æˆåŠŸå®‰è£…Linuxå¹¶ä¸”å­¦ä¼šåœ¨Linuxå’ŒWindowsä¹‹é—´äº’ç›¸è®¿é—®ï¼Œå°±ç®—æˆåŠŸäº†  
ä¹‹åä¸»è¦å°±æ˜¯å­¦ä¹ ä¸€äº›Linuxå‘½ä»¤å•¦ï¼Œæˆ‘æ›¾ç»ä¹Ÿç¨ç¨æ•´ç†è¿‡ï¼Œä¼ é€é—¨ï¼š[Linuxï¼šåŸºç¡€çŸ¥è¯†å’Œå·¥å…·æ“ä½œ](https://blackdn.github.io/2020/03/29/Linux-Basic-Tool-2020/)  
å…³äºWSLè¿˜æœ‰ä¸€äº›å…¶ä»–æ“ä½œï¼Œæ¯”å¦‚è½¬ç§»Linuxæ‰€åœ¨çš„ç¡¬ç›˜ç©ºé—´ç­‰ï¼Œå› ä¸ºæˆ‘ç”¨ä¸å¤ªåˆ°æ‰€ä»¥å°±ä¸ä½œç¤ºèŒƒäº†  
æœ‰éœ€è¦çš„å¯ä»¥æŒ‰ç…§å‚è€ƒçš„ç¬¬ä¸€ç¯‡å†…å®¹è·Ÿç€åšå°±è¡Œäº†ğŸ‘‡  
æ–°å¹´å¿«ä¹ï¼Œå…ƒæ—¦å¿«ä¹â™¥

## å‚è€ƒ

1. [Windows Subsystem for Linux 2: The Complete Guide](https://www.sitepoint.com/wsl2/)
2. [Windowsæ–‡æ¡£ï¼šWSLæ–‡æ¡£](https://docs.microsoft.com/zh-cn/windows/wsl/)
3. [Windowsæ–‡æ¡£ï¼šåŸºæœ¬WSLå‘½ä»¤](https://docs.microsoft.com/zh-cn/windows/wsl/basic-commands)
4. [Linuxç³»ç»Ÿä½¿ç”¨æ·»åŠ æ–°ç”¨æˆ·åï¼Œæ²¡æœ‰ç”¨æˆ·ç›®å½•ï¼ˆæ²¡æœ‰homeï¼‰è§£å†³åŠæ³•](https://blog.csdn.net/u013053075/article/details/106070566?spm=1001.2101.3001.6650.1&utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1.no_search_link&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1.no_search_link&utm_relevant_index=2)
5. [xxx is not in the sudoers file.This incident will be reported.çš„è§£å†³æ–¹æ³•](https://blog.csdn.net/zsw12013/article/details/51243884)
6. [Linuxï¼šåŸºç¡€çŸ¥è¯†å’Œå·¥å…·æ“ä½œ](https://blackdn.github.io/2020/03/29/Linux-Basic-Tool-2020/)
